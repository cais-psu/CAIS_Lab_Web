# .github/workflows/on-schedule.yaml
name: on-schedule

on:
  schedule:
    - cron: "0 3 1,15 * *"   # 每月 1日/15日 03:00 UTC（≈ 每两周）
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  call-update:
    # 用复用工作流（被调用方）——
    # 注意 @main 要与你仓库默认分支一致（若默认分支不是 main，请改成 @<你的默认分支名>）
    uses: cais-psu/CAIS_Lab_Web/.github/workflows/update-citations.yaml@main

    # ⭐⭐⭐ 关键：把 secrets 继承给被调用工作流；没有这行，就会出现
    # "secrets.GOOGLE_SCHOLAR_API_KEY EMPTY in context."
    secrets: inherit

    with:
      open-pr: true
